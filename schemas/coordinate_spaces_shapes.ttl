@prefix noid: <https://github.com/nclack/noid/schemas/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# SHACL validation shapes for NOID coordinate spaces vocabulary
# These shapes define semantic constraints for coordinate spaces and dimensions

# Coordinate Space Shape
noid:CoordinateSpaceShape
    a sh:NodeShape ;
    sh:targetClass noid:CoordinateSpace ;
    rdfs:label "Coordinate Space Shape" ;
    rdfs:comment "Validates coordinate spaces with required dimensions array" ;
    sh:property [
        sh:path noid:dimensions ;
        sh:name "dimensions" ;
        sh:description "Array of dimension objects defining the coordinate space" ;
        sh:minCount 1 ;
        sh:nodeKind sh:BlankNode ;
        sh:node noid:DimensionShape ;
    ] ;
    sh:property [
        sh:path noid:name ;
        sh:name "coordinate space name" ;
        sh:description "Human-readable name for the coordinate space" ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
    ] ;
    sh:property [
        sh:path noid:description ;
        sh:name "coordinate space description" ;
        sh:description "Description of the coordinate space" ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
    ] .

# Dimension Shape
noid:DimensionShape
    a sh:NodeShape ;
    rdfs:label "Dimension Shape" ;
    rdfs:comment "Validates individual dimensions within coordinate spaces" ;
    sh:property [
        sh:path noid:name ;
        sh:name "dimension name" ;
        sh:description "Name of the dimension (e.g., 'x', 'y', 'z', 't')" ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
    ] ;
    sh:property [
        sh:path noid:unit ;
        sh:name "dimension unit" ;
        sh:description "Unit of measurement for the dimension" ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:in ( "micrometer" "millimeter" "meter" "index" "arbitrary" "second" "minute" "hour" "radian" "degree" ) ;
    ] ;
    sh:property [
        sh:path noid:type ;
        sh:name "dimension type" ;
        sh:description "Type of dimension: space, time, or other" ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:in ( "space" "time" "other" ) ;
    ] .

# Constraint: space and time dimensions should use appropriate units
noid:SpaceTimeUnitConstraint
    a sh:NodeShape ;
    sh:targetNode [ noid:type "space" ] ;
    rdfs:label "Space Dimension Unit Constraint" ;
    sh:property [
        sh:path noid:unit ;
        sh:in ( "micrometer" "millimeter" "meter" "index" "arbitrary" ) ;
        sh:message "Space dimensions should use spatial units (micrometer, millimeter, meter) or generic units (index, arbitrary)" ;
    ] .

noid:TimeUnitConstraint
    a sh:NodeShape ;
    sh:targetNode [ noid:type "time" ] ;
    rdfs:label "Time Dimension Unit Constraint" ;
    sh:property [
        sh:path noid:unit ;
        sh:in ( "second" "minute" "hour" "index" "arbitrary" ) ;
        sh:message "Time dimensions should use temporal units (second, minute, hour) or generic units (index, arbitrary)" ;
    ] .